setwd("/home/user/Desktop/git/Lecture5")
getwd()
library(raster)
source('R/cleaningClouds.R')
source('R/ndvi.R')
download.file(url = 'https://www.dropbox.com/s/akb9oyye3ee92h3/LT51980241990098-SC20150107121947.tar.gz?dl=0',
destfile = 'landsat5.tar.gz', method = 'wget')
download.file(url = 'https://www.dropbox.com/s/i1ylsft80ox6a32/LC81970242014109-SC20141230042441.tar.gz?dl=0#',
destfile = 'landsat8.tar.gz', method = 'wget')
untar('landsat5.tar.gz',exdir='LT5')
untar('landsat8.tar.gz',exdir='LT8')
getwd()
listLT5 <- list.files('./LT5' ,
pattern = glob2rx('*.tif'), full.names = TRUE)
listLT8 <- list.files('./LT8' ,
pattern = glob2rx('*.tif'), full.names = TRUE)
LT5stack <- stack(listLT5)
LT8stack <- stack(listLT8)
plot(LT8stack[[1]])
plot(LT8stack[[9]])
LT5_nocloud<-cleaningClouds(LT5stack,1)
LT8_nocloud<-cleaningClouds(LT8stack,1)
plot(LT5_nocloud[[2]])
plot(LT8_nocloud[[2]])
LT5_nocloud
LT5_ndvi <- ndvCalc(LT5_nocloud[[5]],LT5_nocloud[[6]])
plot(LT5_ndvi)
LT8_ndvi <- ndvCalc(LT8_nocloud[[4]],LT8_nocloud[[5]])
plot(LT8_ndvi)
LT5_crop <- intersect(LT5_ndvi,LT8_ndvi)
LT8_crop <- intersect(LT8_ndvi,LT5_ndvi)
NDVI_dif = LT8_crop - LT5_crop
plot(NDVI_dif)
plot(LT5_ndvi, main="NDVI for Landsat TM 5, 1990")
LT8_ndvi <- ndvCalc(LT8_nocloud[[4]],LT8_nocloud[[5]])
plot(LT8_ndvi, main="NDVI for Landsat 8 OLI, 2014")
plot(LT8stack[[1]])
LT5stack
LT8stack
plot(LT5stack[[1]], main="Clouds mask in Landsat TM 5 image, 1990")
plot(LT8stack[[1]], main="Clouds mask in Landsat OLI image, 2014")
ndvi3 <- overlay(x=LT5_nocloud[[5]], y=LT5_nocloud[[6]], fun=ndvCalc())
ndvi3 <- overlay(x=LT5_nocloud[[5]],y=LT5_nocloud[[6]],fun=ndvCalc())
ndvi3 <- overlay(red=LT5_nocloud[[5]],nir=LT5_nocloud[[6]],fun=ndvCalc())
ndvitest <- overlay(LT5_nocloud[[5]],LT5_nocloud[[6]],ndvCalc)
ndvitest <- overlay(LT5_nocloud[[5]],LT5_nocloud[[6]],fun=ndvCalc)
source('R/cleaningClouds.R')
source('R/ndvi.R')
LT5_ndvi <- overlay(LT5_nocloud[[5]],LT5_nocloud[[6]],fun=ndviCalc)
plot(LT5_ndvi, main="NDVI for Landsat TM 5, 1990")
LT8_ndvi <- overlay(LT8_nocloud[[4]],LT8_nocloud[[5]],fun=ndviCalc)
plot(LT8_ndvi, main="NDVI for Landsat 8 OLI, 2014")
LT5_nocloud<-overlay(LT5stack,1,fun= cleaningClouds)
